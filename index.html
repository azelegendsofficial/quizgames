<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Master Pro</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #7c3aed;
            --primary-light: #9862fc;
            --primary-dark: #6b27d6;
            --secondary: #10b981;
            --secondary-light: #34d399;
            --secondary-dark: #059669;
            --gradient-start: #7c3aed;
            --gradient-end: #2dd4bf;
            --error: #ef4444;
            --warning: #f59e0b;
            --background: #f9fafb;
            --card-bg: #ffffff;
            --text-primary: #1f2937;
            --text-secondary: #4b5563;
            --text-light: #9ca3af;
            --border-radius: 12px;
            --shadow: 0 10px 25px rgba(124, 58, 237, 0.15);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Outfit', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, var(--gradient-start), var(--gradient-end));
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--text-primary);
            padding: 1rem;
        }
        
        .container {
            width: 100%;
            max-width: 800px;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        h1 {
            color: var(--primary);
            margin-bottom: 1.5rem;
            font-size: 2.5rem;
            font-weight: 700;
        }
        
        h2 {
            color: var(--primary);
            margin-bottom: 1rem;
            font-weight: 600;
        }
        
        .lobby, .game-area {
            transition: var(--transition);
        }
        
        .hidden {
            display: none;
        }
        
        .username-display {
            font-size: 1.2rem;
            color: var(--primary);
            margin-bottom: 1.5rem;
            font-weight: 600;
        }
        
        .code-input {
            margin: 1.5rem auto;
            width: 100%;
            max-width: 300px;
            position: relative;
        }
        
        .code-input input {
            width: 100%;
            padding: 0.75rem 1.25rem;
            border-radius: 2rem;
            border: 2px solid var(--primary-light);
            font-size: 1rem;
            outline: none;
            background: var(--card-bg);
            transition: var(--transition);
        }
        
        .code-input input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.2);
        }
        
        .game-options {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.75rem 1.5rem;
            border-radius: 2rem;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            outline: none;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 10px rgba(124, 58, 237, 0.3);
        }
        
        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(124, 58, 237, 0.4);
        }
        
        .btn-secondary {
            background: var(--secondary);
            color: white;
            box-shadow: 0 4px 10px rgba(16, 185, 129, 0.3);
        }
        
        .btn-secondary:hover {
            background: var(--secondary-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(16, 185, 129, 0.4);
        }
        
        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }
        
        .btn-outline:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
        }
        
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background: var(--card-bg);
            padding: 2rem;
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 400px;
            text-align: center;
            box-shadow: var(--shadow);
            transform: scale(0.8);
            transition: transform 0.3s ease;
        }
        
        .modal-overlay.active .modal-content {
            transform: scale(1);
        }
        
        .modal-content h2 {
            margin-bottom: 1.5rem;
            color: var(--primary);
        }
        
        .modal-content input {
            width: 100%;
            padding: 0.75rem;
            margin-bottom: 1.5rem;
            border-radius: 0.5rem;
            border: 2px solid var(--text-light);
            font-size: 1rem;
            transition: var(--transition);
        }
        
        .modal-content input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.2);
            outline: none;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(124, 58, 237, 0.2);
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1.5rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .score-display {
            background: var(--primary);
            color: white;
            padding: 0.5rem 1.25rem;
            border-radius: 2rem;
            font-size: 1.1rem;
            font-weight: 600;
            margin: 1.5rem auto;
            width: fit-content;
            min-width: 150px;
            box-shadow: 0 4px 10px rgba(124, 58, 237, 0.3);
        }
        
        .question-container {
            margin: 2rem 0;
            background: var(--background);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }
        
        .question {
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            color: var(--text-primary);
            font-weight: 500;
        }
        
        .answer-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .answer-btn {
            background: var(--card-bg);
            border: 2px solid var(--primary-light);
            color: var(--text-primary);
            padding: 1rem;
            border-radius: 0.75rem;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            text-align: left;
            font-weight: 500;
        }
        
        .answer-btn:hover {
            background: rgba(124, 58, 237, 0.05);
            border-color: var(--primary);
        }
        
        .answer-btn.correct {
            background: rgba(16, 185, 129, 0.2);
            border-color: var(--secondary);
            color: var(--secondary-dark);
        }
        
        .answer-btn.incorrect {
            background: rgba(239, 68, 68, 0.2);
            border-color: var(--error);
            color: var(--error);
        }
        
        .back-btn {
            position: absolute;
            top: 1.5rem;
            left: 1.5rem;
            background: none;
            border: none;
            color: var(--primary);
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .back-btn:hover {
            color: var(--primary-dark);
        }
        
        .waiting-text {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin: 2rem 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }
        
        .dot-animation {
            display: inline-block;
        }
        
        .dot-animation::after {
            content: "...";
            animation: dots 1.5s infinite;
        }
        
        @keyframes dots {
            0%, 20% { content: "."; }
            40% { content: ".."; }
            60%, 100% { content: "..."; }
        }
        
        .leaderboard {
            background: var(--background);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin-top: 2rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }
        
        .leaderboard h2 {
            color: var(--primary);
            margin-bottom: 1.5rem;
        }
        
        .leaderboard-list {
            list-style: none;
        }
        
        .leaderboard-item {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid rgba(156, 163, 175, 0.2);
            font-weight: 500;
        }
        
        .leaderboard-item:last-child {
            border-bottom: none;
        }
        
        .leaderboard-item .rank {
            font-weight: 600;
            color: var(--primary);
        }
        
        .leaderboard-item .name {
            flex-grow: 1;
            text-align: left;
            margin-left: 1rem;
        }
        
        .leaderboard-item .score {
            color: var(--primary);
        }
        
        .win-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            z-index: 1000;
        }
        
        .win-content {
            text-align: center;
            color: white;
            animation: scale 0.5s ease-in-out;
            background: rgba(124, 58, 237, 0.2);
            backdrop-filter: blur(10px);
            padding: 3rem;
            border-radius: var(--border-radius);
            box-shadow: 0 0 30px rgba(124, 58, 237, 0.5);
        }
        
        .win-content h1 {
            color: white;
            margin-bottom: 1rem;
        }
        
        .win-content p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
        }
        
        @keyframes scale {
            0% { transform: scale(0); }
            70% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #fff;
            animation: confetti 4s ease-in-out infinite;
        }
        
        @keyframes confetti {
            0% { transform: translateY(0) rotate(0deg); opacity: 1; }
            100% { transform: translateY(1000px) rotate(720deg); opacity: 0; }
        }
        
        .progress-container {
            margin: 1rem 0;
            width: 100%;
            height: 10px;
            background: rgba(124, 58, 237, 0.2);
            border-radius: 5px;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: var(--primary);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .timer-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            font-weight: 500;
            color: var(--text-secondary);
        }
        
        .stats-container {
            display: flex;
            justify-content: space-around;
            margin: 1rem 0;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 0.25rem;
        }
        
        .stat-value {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--primary);
        }
        
        @media (max-width: 640px) {
            .container {
                padding: 1.5rem;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .answer-options {
                grid-template-columns: 1fr;
            }
            
            .game-options {
                flex-direction: column;
                gap: 0.75rem;
            }
            
            .btn {
                width: 100%;
            }
            
            .modal-content {
                padding: 1.5rem;
            }
        }
        
        /* Difficulty badges */
        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 0.5rem;
        }
        
        .badge-easy {
            background: rgba(16, 185, 129, 0.2);
            color: var(--secondary-dark);
        }
        
        .badge-medium {
            background: rgba(245, 158, 11, 0.2);
            color: var(--warning);
        }
        
        .badge-hard {
            background: rgba(239, 68, 68, 0.2);
            color: var(--error);
        }
        
        /* Category badges */
        .category-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.75rem;
            font-weight: 600;
            background: rgba(124, 58, 237, 0.1);
            color: var(--primary);
            margin-bottom: 1rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Lobby Area -->
        <div class="lobby">
            <h1>Quiz Master Pro</h1>
            <div class="username-display">Welcome, Guest</div>
            
            <div class="code-input">
                <input type="text" id="codeInput" placeholder="Masukkan Kode Room">
            </div>
            
            <div class="game-options">
                <button class="btn btn-primary" id="multiplayerBtn">Multiplayer</button>
                <button class="btn btn-secondary" id="singleplayerBtn">Singleplayer</button>
            </div>
        </div>
        
        <!-- Game Area -->
        <div class="game-area hidden">
            <button class="back-btn" id="backBtn">← Kembali</button>
            <div class="score-display" id="scoreDisplay">Score: 0</div>
            
            <div class="stats-container hidden" id="statsContainer">
                <div class="stat-item">
                    <div class="stat-label">Benar</div>
                    <div class="stat-value" id="correctStat">0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Salah</div>
                    <div class="stat-value" id="incorrectStat">0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Akurasi</div>
                    <div class="stat-value" id="accuracyStat">0%</div>
                </div>
            </div>
            
            <div class="waiting-text hidden" id="waitingText">
                Menunggu Pemain Lain <span class="dot-animation"></span>
            </div>
            
            <div class="question-container hidden" id="questionContainer">
                <div class="category-badge" id="categoryBadge">General Knowledge</div>
                <div class="question" id="questionText">Pertanyaan akan muncul di sini</div>
                
                <div class="timer-container">
                    <span id="timerText">10</span> detik tersisa
                </div>
                
                <div class="progress-container">
                    <div class="progress-bar" id="progressBar"></div>
                </div>
                
                <div class="answer-options" id="answerOptions">
                    <!-- Answer options will be added dynamically -->
                </div>
            </div>
            
            <div class="leaderboard hidden" id="leaderboard">
                <h2>Leaderboard</h2>
                <ul class="leaderboard-list" id="leaderboardList">
                    <!-- Leaderboard items will be added dynamically -->
                </ul>
                
                <div class="game-options" style="margin-top: 2rem;">
                    <button class="btn btn-primary" id="playAgainBtn">Main Lagi</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Login Modal -->
    <div class="modal-overlay" id="loginModal">
        <div class="modal-content">
            <h2>Masukkan Nama</h2>
            <input type="text" id="usernameInput" placeholder="Nama Anda" maxlength="15">
            <button class="btn btn-primary" id="submitUsernameBtn">Mulai</button>
        </div>
    </div>
    
    <!-- Loading Modal -->
    <div class="modal-overlay" id="loadingModal">
        <div class="modal-content">
            <div class="spinner"></div>
            <p>Loading...</p>
        </div>
    </div>
    
    <script>
        // Quiz questions with categories and difficulty levels
        const allQuestions = [
            // General Knowledge - Easy
            {
                question: "Apa ibukota Indonesia?",
                options: ["Jakarta", "Surabaya", "Bandung", "Medan"],
                answer: 0,
                category: "General Knowledge",
                difficulty: "easy"
            },
            {
                question: "Berapa jumlah provinsi di Indonesia?",
                options: ["34", "35", "36", "37"],
                answer: 0,
                category: "General Knowledge",
                difficulty: "easy"
            },
            {
                question: "Siapakah presiden pertama Indonesia?",
                options: ["Soekarno", "Soeharto", "B.J. Habibie", "Megawati"],
                answer: 0,
                category: "General Knowledge",
                difficulty: "easy"
            },
            {
                question: "Warna apa yang dihasilkan dari pencampuran merah dan kuning?",
                options: ["Ungu", "Orange", "Hijau", "Coklat"],
                answer: 1,
                category: "General Knowledge",
                difficulty: "easy"
            },
            {
                question: "Apa nama mata uang Jepang?",
                options: ["Won", "Yuan", "Yen", "Ringgit"],
                answer: 2,
                category: "General Knowledge",
                difficulty: "easy"
            },
            
            // Science - Easy
            {
                question: "Apa simbol kimia untuk oksigen?",
                options: ["O", "OX", "OG", "OT"],
                answer: 0,
                category: "Science",
                difficulty: "easy"
            },
            {
                question: "Berapa jumlah sisi pada kubus?",
                options: ["4", "6", "8", "12"],
                answer: 1,
                category: "Science",
                difficulty: "easy"
            },
            {
                question: "Planet apa yang paling dekat dengan matahari?",
                options: ["Venus", "Bumi", "Mars", "Merkurius"],
                answer: 3,
                category: "Science",
                difficulty: "easy"
            },
            {
                question: "Berapa derajat jumlah sudut dalam segitiga?",
                options: ["90 derajat", "180 derajat", "270 derajat", "360 derajat"],
                answer: 1,
                category: "Science",
                difficulty: "easy"
            },
            {
                question: "Apa nama alat yang digunakan untuk mengukur tekanan darah?",
                options: ["Termometer", "Stetoskop", "Tensimeter", "Mikroskop"],
                answer: 2,
                category: "Science",
                difficulty: "easy"
            },
            
            // Entertainment - Easy
            {
                question: "Siapakah penulis novel 'Laskar Pelangi'?",
                options: ["Dee Lestari", "Tere Liye", "Andrea Hirata", "Pramoedya Ananta Toer"],
                answer: 2,
                category: "Entertainment",
                difficulty: "easy"
            },
            {
                question: "Berapa jumlah pemain dalam satu tim sepak bola?",
                options: ["9", "10", "11", "12"],
                answer: 2,
                category: "Entertainment",
                difficulty: "easy"
            },
            {
                question: "Siapakah penyanyi lagu 'Shape of You'?",
                options: ["Justin Bieber", "Ed Sheeran", "Bruno Mars", "John Legend"],
                answer: 1,
                category: "Entertainment",
                difficulty: "easy"
            },
            {
                question: "Film 'Pengabdi Setan' adalah film bergenre?",
                options: ["Komedi", "Horor", "Romantis", "Action"],
                answer: 1,
                category: "Entertainment",
                difficulty: "easy"
            },
            {
                question: "Siapa pelawak Indonesia yang dijuluki 'Rajanya Lawak'?",
                options: ["Sule", "Tukul Arwana", "Komeng", "Dono Kasino Indro"],
                answer: 0,
                category: "Entertainment",
                difficulty: "easy"
            },
            
            // General Knowledge - Medium
            {
                question: "Apa nama benua terluas di dunia?",
                options: ["Amerika", "Afrika", "Eropa", "Asia"],
                answer: 3,
                category: "General Knowledge",
                difficulty: "medium"
            },
            {
                question: "Negara mana yang memiliki penduduk terbanyak di dunia?",
                options: ["India", "Amerika Serikat", "China", "Indonesia"],
                answer: 2,
                category: "General Knowledge",
                difficulty: "medium"
            },
            {
                question: "Pada tahun berapa Indonesia merdeka?",
                options: ["1942", "1945", "1949", "1950"],
                answer: 1,
                category: "General Knowledge",
                difficulty: "medium"
            },
            {
                question: "Apa nama sungai terpanjang di dunia?",
                options: ["Sungai Nil", "Sungai Amazon", "Sungai Mississippi", "Sungai Yangtze"],
                answer: 0,
                category: "General Knowledge",
                difficulty: "medium"
            },
            {
                question: "Apa hewan nasional Indonesia?",
                options: ["Harimau Sumatera", "Komodo", "Gajah", "Garuda"],
                answer: 3,
                category: "General Knowledge",
                difficulty: "medium"
            },
            
            // Science - Medium
            {
                question: "Apa nama ilmuwan yang menemukan hukum gravitasi?",
                options: ["Albert Einstein", "Isaac Newton", "Galileo Galilei", "Stephen Hawking"],
                answer: 1,
                category: "Science",
                difficulty: "medium"
            },
            {
                question: "Apa rumus kimia untuk air?",
                options: ["H2O", "CO2", "O2", "H2O2"],
                answer: 0,
                category: "Science",
                difficulty: "medium"
            },
            {
                question: "Berapa jumlah planet di tata surya kita?",
                options: ["7", "8", "9", "10"],
                answer: 1,
                category: "Science",
                difficulty: "medium"
            },
            {
                question: "Apa nama proses fotosintesis pada tumbuhan?",
                options: ["Respirasi", "Transpirasi", "Fotosintesis", "Evaporasi"],
                answer: 2,
                category: "Science",
                difficulty: "medium"
            },
            {
                question: "Pada skala Celsius, air mendidih pada berapa derajat?",
                options: ["90°C", "95°C", "100°C", "105°C"],
                answer: 2,
                category: "Science",
                difficulty: "medium"
            },
            
            // Entertainment - Medium
            {
                question: "Siapa sutradara film 'The Godfather'?",
                options: ["Steven Spielberg", "Francis Ford Coppola", "Martin Scorsese", "Quentin Tarantino"],
                answer: 1,
                category: "Entertainment",
                difficulty: "medium"
            },
            {
                question: "Berapa jumlah film Star Wars yang dibuat oleh George Lucas?",
                options: ["3", "6", "9", "12"],
                answer: 1,
                category: "Entertainment",
                difficulty: "medium"
            },
            {
                question: "Siapa penulis novel 'Harry Potter'?",
                options: ["J.R.R. Tolkien", "J.K. Rowling", "Stephen King", "George R.R. Martin"],
                answer: 1,
                category: "Entertainment",
                difficulty: "medium"
            },
            {
                question: "Band rock Indonesia yang vokalisnya bernama Kaka?",
                options: ["Dewa 19", "Slank", "Sheila On 7", "Noah"],
                answer: 2,
                category: "Entertainment",
                difficulty: "medium"
            },
            {
                question: "Apa nama platform streaming musik terbesar di dunia?",
                options: ["Apple Music", "Spotify", "Tidal", "Deezer"],
                answer: 1,
                category: "Entertainment",
                difficulty: "medium"
            },
            
            // General Knowledge - Hard
            {
                question: "Pada tahun berapa PBB dibentuk?",
                options: ["1942", "1945", "1948", "1950"],
                answer: 1,
                category: "General Knowledge",
                difficulty: "hard"
            },
            {
                question: "Siapa yang menciptakan teori relativitas?",
                options: ["Isaac Newton", "Albert Einstein", "Galileo Galilei", "Niels Bohr"],
                answer: 1,
                category: "General Knowledge",
                difficulty: "hard"
            },
            {
                question: "Berapa panjang Tembok Besar China?",
                options: ["4,000 km", "6,000 km", "8,000 km", "10,000 km"],
                answer: 2,
                category: "General Knowledge",
                difficulty: "hard"
            },
            {
                question: "Siapa presiden Amerika Serikat yang pertama?",
                options: ["Thomas Jefferson", "Abraham Lincoln", "George Washington", "John Adams"],
                answer: 2,
            },
            {
                answer: 2,
                category: "General Knowledge",
                difficulty: "hard"
            },
            {
                question: "Apa nama suku yang mendiami pulau Greenland?",
                options: ["Inuit", "Maori", "Viking", "Eskimo"],
                answer: 0,
                category: "General Knowledge",
                difficulty: "hard"
            },
            
            // Science - Hard
            {
                question: "Atom terdiri dari partikel subatomik apa saja?",
                options: ["Proton dan elektron", "Proton, elektron, dan neutron", "Proton dan neutron", "Elektron dan neutron"],
                answer: 1,
                category: "Science",
                difficulty: "hard"
            },
            {
                question: "Apa nama proses pembelahan sel yang menghasilkan empat sel haploid?",
                options: ["Mitosis", "Meiosis", "Sitokinesis", "Replikasi"],
                answer: 1,
                category: "Science",
                difficulty: "hard"
            },
            {
                question: "Apa yang menyebabkan warna biru pada langit?",
                options: ["Refleksi lautan", "Hamburan Rayleigh", "Absorpsi atmosfer", "Polarisasi cahaya"],
                answer: 1,
                category: "Science",
                difficulty: "hard"
            },
            {
                question: "Hukum termodinamika kedua berkaitan dengan?",
                options: ["Kekekalan energi", "Entropi", "Tekanan gas", "Energi kinetik"],
                answer: 1,
                category: "Science",
                difficulty: "hard"
            },
            {
                question: "Berapa kecepatan cahaya dalam ruang hampa?",
                options: ["299,792 km/s", "300,000 km/s", "299,792,458 m/s", "300,000,000 m/s"],
                answer: 2,
                category: "Science",
                difficulty: "hard"
            },
            
            // Entertainment - Hard
            {
                question: "Film apa yang memenangkan Oscar untuk Best Picture tahun 2020?",
                options: ["1917", "Joker", "Parasite", "Once Upon a Time in Hollywood"],
                answer: 2,
                category: "Entertainment",
                difficulty: "hard"
            },
            {
                question: "Siapa penulis novel 'Perang dan Damai'?",
                options: ["Fyodor Dostoyevsky", "Leo Tolstoy", "Anton Chekhov", "Ivan Turgenev"],
                answer: 1,
                category: "Entertainment",
                difficulty: "hard"
            },
            {
                question: "Band rock mana yang memiliki album berjudul 'Dark Side of the Moon'?",
                options: ["The Beatles", "Led Zeppelin", "Pink Floyd", "The Rolling Stones"],
                answer: 2,
                category: "Entertainment",
                difficulty: "hard"
            },
            {
                question: "Siapa komposer Symphony No. 9 (Choral)?",
                options: ["Mozart", "Bach", "Beethoven", "Tchaikovsky"],
                answer: 2,
                category: "Entertainment",
                difficulty: "hard"
            },
            {
                question: "Film 'Parasite' berasal dari negara mana?",
                options: ["Jepang", "China", "Korea Selatan", "Thailand"],
                answer: 2,
                category: "Entertainment",
                difficulty: "hard"
            }
        ];
        
        // DOM Elements
        const lobby = document.querySelector('.lobby');
        const gameArea = document.querySelector('.game-area');
        const usernameDisplay = document.querySelector('.username-display');
        const codeInput = document.getElementById('codeInput');
        const multiplayerBtn = document.getElementById('multiplayerBtn');
        const singleplayerBtn = document.getElementById('singleplayerBtn');
        const backBtn = document.getElementById('backBtn');
        const scoreDisplay = document.getElementById('scoreDisplay');
        const statsContainer = document.getElementById('statsContainer');
        const waitingText = document.getElementById('waitingText');
        const questionContainer = document.getElementById('questionContainer');
        const categoryBadge = document.getElementById('categoryBadge');
        const questionText = document.getElementById('questionText');
        const timerText = document.getElementById('timerText');
        const progressBar = document.getElementById('progressBar');
        const answerOptions = document.getElementById('answerOptions');
        const leaderboard = document.getElementById('leaderboard');
        const leaderboardList = document.getElementById('leaderboardList');
        const playAgainBtn = document.getElementById('playAgainBtn');
        const loginModal = document.getElementById('loginModal');
        const usernameInput = document.getElementById('usernameInput');
        const submitUsernameBtn = document.getElementById('submitUsernameBtn');
        const loadingModal = document.getElementById('loadingModal');
        const correctStat = document.getElementById('correctStat');
        const incorrectStat = document.getElementById('incorrectStat');
        const accuracyStat = document.getElementById('accuracyStat');
        
        // Game Variables
        let username = "Guest";
        let roomCode = "";
        let score = 0;
        let currentQuestion = 0;
        let questions = [];
        let timer;
        let timeLeft = 10;
        let isMultiplayer = false;
        let players = [];
        let answeredQuestions = 0;
        let correctAnswers = 0;
        let gameStarted = false;
        
        // Game Functions
        function init() {
            showLoginModal();
            
            // Event Listeners
            submitUsernameBtn.addEventListener('click', handleUsernameSubmit);
            multiplayerBtn.addEventListener('click', startMultiplayer);
            singleplayerBtn.addEventListener('click', startSingleplayer);
            backBtn.addEventListener('click', goBackToLobby);
            playAgainBtn.addEventListener('click', restartGame);
            
            // Press Enter to submit username
            usernameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    handleUsernameSubmit();
                }
            });
            
            // Press Enter to join room
            codeInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && codeInput.value.trim() !== '') {
                    startMultiplayer();
                }
            });
        }
        
        function handleUsernameSubmit() {
            const name = usernameInput.value.trim();
            if (name !== "") {
                username = name;
                usernameDisplay.textContent = `Welcome, ${username}`;
                hideLoginModal();
            }
        }
        
        function showLoginModal() {
            loginModal.classList.add('active');
            usernameInput.focus();
        }
        
        function hideLoginModal() {
            loginModal.classList.remove('active');
        }
        
        function showLoadingModal() {
            loadingModal.classList.add('active');
        }
        
        function hideLoadingModal() {
            loadingModal.classList.remove('active');
        }
        
        function startSingleplayer() {
            isMultiplayer = false;
            roomCode = "";
            score = 0;
            answeredQuestions = 0;
            correctAnswers = 0;
            
            // Select random questions
            questions = getRandomQuestions(10);
            currentQuestion = 0;
            
            showGameArea();
            hideLeaderboard();
            hideWaitingText();
            updateScore();
            updateStats();
            showStatsContainer();
            
            showQuestion();
            gameStarted = true;
        }
        
        function startMultiplayer() {
            isMultiplayer = true;
            roomCode = codeInput.value.trim() || generateRoomCode();
            score = 0;
            answeredQuestions = 0;
            correctAnswers = 0;
            
            showLoadingModal();
            
            // Simulate server connection delay
            setTimeout(() => {
                hideLoadingModal();
                
                // In a real app, this would be handled by the server
                questions = getRandomQuestions(10);
                currentQuestion = 0;
                
                // Simulate other players
                players = [
                    { name: username, score: 0 },
                    { name: "Player 1", score: 0 },
                    { name: "Player 2", score: 0 },
                    { name: "Player 3", score: 0 }
                ];
                
                showGameArea();
                hideLeaderboard();
                showWaitingText();
                hideStatsContainer();
                updateScore();
                
                // Simulate waiting for players
                setTimeout(() => {
                    hideWaitingText();
                    showQuestion();
                    gameStarted = true;
                }, 3000);
            }, 1500);
        }
        
        function generateRoomCode() {
            return Math.floor(100000 + Math.random() * 900000).toString();
        }
        
        function showGameArea() {
            lobby.classList.add('hidden');
            gameArea.classList.remove('hidden');
        }
        
        function goBackToLobby() {
            if (gameStarted) {
                if (confirm("Are you sure you want to quit the game?")) {
                    resetGame();
                    gameArea.classList.add('hidden');
                    lobby.classList.remove('hidden');
                    gameStarted = false;
                }
            } else {
                resetGame();
                gameArea.classList.add('hidden');
                lobby.classList.remove('hidden');
            }
        }
        
        function resetGame() {
            clearInterval(timer);
            hideQuestionContainer();
            hideLeaderboard();
            hideWaitingText();
            hideStatsContainer();
            currentQuestion = 0;
            score = 0;
            answeredQuestions = 0;
            correctAnswers = 0;
            roomCode = "";
            players = [];
            questions = [];
            gameStarted = false;
        }
        
        function restartGame() {
            hideLeaderboard();
            
            if (isMultiplayer) {
                startMultiplayer();
            } else {
                startSingleplayer();
            }
        }
        
        function getRandomQuestions(num) {
            const shuffled = [...allQuestions].sort(() => 0.5 - Math.random());
            return shuffled.slice(0, num);
        }
        
        function showQuestion() {
            if (currentQuestion >= questions.length) {
                endGame();
                return;
            }
            
            const question = questions[currentQuestion];
            questionText.textContent = question.question;
            categoryBadge.textContent = question.category;
            
            // Add difficulty badge
            let difficultyClass = "badge-easy";
            if (question.difficulty === "medium") {
                difficultyClass = "badge-medium";
            } else if (question.difficulty === "hard") {
                difficultyClass = "badge-hard";
            }
            
            categoryBadge.innerHTML = `${question.category} <span class="badge ${difficultyClass}">${question.difficulty}</span>`;
            
            // Clear previous options
            answerOptions.innerHTML = "";
            
            // Add answer options
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.classList.add('answer-btn');
                button.textContent = option;
                button.dataset.index = index;
                button.addEventListener('click', () => checkAnswer(index));
                answerOptions.appendChild(button);
            });
            
            showQuestionContainer();
            startTimer();
        }
        
        function startTimer() {
            timeLeft = 10;
            timerText.textContent = timeLeft;
            progressBar.style.width = "100%";
            
            clearInterval(timer);
            timer = setInterval(() => {
                timeLeft--;
                timerText.textContent = timeLeft;
                progressBar.style.width = `${(timeLeft / 10) * 100}%`;
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    timeOut();
                }
            }, 1000);
        }
        
        function timeOut() {
            answeredQuestions++;
            updateStats();
            
            // Highlight correct answer
            const correctIndex = questions[currentQuestion].answer;
            const buttons = answerOptions.querySelectorAll('.answer-btn');
            buttons[correctIndex].classList.add('correct');
            
            setTimeout(() => {
                currentQuestion++;
                showQuestion();
            }, 2000);
        }
        
        function checkAnswer(selectedIndex) {
            clearInterval(timer);
            answeredQuestions++;
            
            const correctIndex = questions[currentQuestion].answer;
            const buttons = answerOptions.querySelectorAll('.answer-btn');
            
            // Disable all buttons
            buttons.forEach(btn => {
                btn.disabled = true;
            });
            
            // Highlight correct and incorrect answers
            buttons[correctIndex].classList.add('correct');
            
            if (selectedIndex === correctIndex) {
                correctAnswers++;
                const questionDifficulty = questions[currentQuestion].difficulty;
                let points = 10;
                
                if (questionDifficulty === "medium") {
                    points = 20;
                } else if (questionDifficulty === "hard") {
                    points = 30;
                }
                
                // Add time bonus
                points += timeLeft;
                
                score += points;
                updateScore();
                updateStats();
            } else {
                buttons[selectedIndex].classList.add('incorrect');
                updateStats();
            }
            
            // If multiplayer, update other players scores randomly
            if (isMultiplayer) {
                updateRandomPlayerScores();
            }
            
            setTimeout(() => {
                currentQuestion++;
                showQuestion();
            }, 2000);
        }
        
        function updateRandomPlayerScores() {
            // Simulate other players answering
            for (let i = 1; i < players.length; i++) {
                if (Math.random() > 0.3) { // 70% chance to get correct answer
                    const questionDifficulty = questions[currentQuestion].difficulty;
                    let points = 10;
                    
                    if (questionDifficulty === "medium") {
                        points = 20;
                    } else if (questionDifficulty === "hard") {
                        points = 30;
                    }
                    
                    // Random time bonus
                    points += Math.floor(Math.random() * 10);
                    
                    players[i].score += points;
                }
            }
            
            // Update player's score
            players[0].score = score;
        }
        
        function updateScore() {
            scoreDisplay.textContent = `Score: ${score}`;
        }
        
        function updateStats() {
            if (answeredQuestions > 0) {
                correctStat.textContent = correctAnswers;
                incorrectStat.textContent = answeredQuestions - correctAnswers;
                accuracyStat.textContent = `${Math.round((correctAnswers / answeredQuestions) * 100)}%`;
            } else {
                correctStat.textContent = "0";
                incorrectStat.textContent = "0";
                accuracyStat.textContent = "0%";
            }
        }
        
        function endGame() {
            hideQuestionContainer();
            
            if (isMultiplayer) {
                // Update final scores
                players[0].score = score;
                
                // Sort players by score
                players.sort((a, b) => b.score - a.score);
                
                // Update leaderboard
                leaderboardList.innerHTML = "";
                players.forEach((player, index) => {
                    const li = document.createElement('li');
                    li.classList.add('leaderboard-item');
                    
                    li.innerHTML = `
                        <span class="rank">#${index + 1}</span>
                        <span class="name">${player.name}</span>
                        <span class="score">${player.score}</span>
                    `;
                    
                    leaderboardList.appendChild(li);
                });
                
                // Check if player won
                if (players[0].name === username) {
                    showWinAnimation();
                }
            } else {
                // Single player leaderboard
                leaderboardList.innerHTML = "";
                const li = document.createElement('li');
                li.classList.add('leaderboard-item');
                
                li.innerHTML = `
                    <span class="rank">#1</span>
                    <span class="name">${username}</span>
                    <span class="score">${score}</span>
                `;
                
                leaderboardList.appendChild(li);
            }
            
            showLeaderboard();
        }
        
        function showWinAnimation() {
            const winAnimation = document.createElement('div');
            winAnimation.classList.add('win-animation');
            
            winAnimation.innerHTML = `
                <div class="win-content">
                    <h1>🏆 You Win! 🏆</h1>
                    <p>Congratulations, ${username}! You scored ${score} points.</p>
                    <button class="btn btn-primary" id="closeWinBtn">Continue</button>
                </div>
            `;
            
            document.body.appendChild(winAnimation);
            
            // Create confetti
            for (let i = 0; i < 100; i++) {
                createConfetti();
            }
            
            document.getElementById('closeWinBtn').addEventListener('click', () => {
                winAnimation.remove();
            });
        }
        
        function createConfetti() {
            const confetti = document.createElement('div');
            confetti.classList.add('confetti');
            
            // Random position
            confetti.style.left = Math.random() * 100 + 'vw';
            confetti.style.top = -10 + 'px';
            
            // Random color
            const colors = ['#f44336', '#e91e63', '#9c27b0', '#673ab7', '#3f51b5', '#2196f3', '#03a9f4', '#00bcd4', '#009688', '#4CAF50', '#8BC34A', '#CDDC39', '#FFEB3B', '#FFC107', '#FF9800', '#FF5722'];
            confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            
            // Random size
            const size = Math.random() * 10 + 5;
            confetti.style.width = size + 'px';
            confetti.style.height = size + 'px';
            
            // Random animation duration
            confetti.style.animationDuration = Math.random() * 3 + 2 + 's';
            
            // Add to body
            document.body.appendChild(confetti);
            
            // Remove after animation
            setTimeout(() => {
                confetti.remove();
            }, 5000);
        }
        
        // Helper functions for UI elements
        function showQuestionContainer() {
            questionContainer.classList.remove('hidden');
        }
        
        function hideQuestionContainer() {
            questionContainer.classList.add('hidden');
        }
        
        function showLeaderboard() {
            leaderboard.classList.remove('hidden');
        }
        
        function hideLeaderboard() {
            leaderboard.classList.add('hidden');
        }
        
        function showWaitingText() {
            waitingText.classList.remove('hidden');
        }
        
        function hideWaitingText() {
            waitingText.classList.add('hidden');
        }
        
        function showStatsContainer() {
            statsContainer.classList.remove('hidden');
        }
        
        function hideStatsContainer() {
            statsContainer.classList.add('hidden');
        }
        
        // Initialize the game
        init();
    </script>
</body>
</html>
